import{r as F,c as b,a as k,o as _,b as p,d as s,e as w,F as O,f as W,g as Y,h as D,i as J,t as f,j as Q,S as L,u as X,k as Z,l as C,p as S,m as T,n as ee,w as N,q as te,s as ae}from"./vendor.6aecaf39.js";const oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}};oe();const r=F({user:{},account:{},profile:{},keeps:[],ActiveKeep:{},MyVaults:[],ActiveVaults:[],ActiveVault:{},MyVaultKeeps:[],ActiveVaultKeeps:[],MyKeeps:[],ActiveUserKeeps:[],CurrentVaultKeeps:[]});var h=(a,t)=>{for(const[e,o]of t)a[e]=o;return a};const se={name:"App",setup(){return{appState:b(()=>r)}}},ne=s("footer",null,[s("div",{class:"bg-dark text-light text-center p-4"}," Made By Cameron ")],-1);function re(a,t,e,o,n,c){const i=k("Navbar"),u=k("router-view");return _(),p(O,null,[s("header",null,[w(i)]),s("main",null,[w(u)]),ne],64)}var ce=h(se,[["render",re]]);const ie="modulepreload",q={},le="/",V=function(t,e){return!e||e.length===0?t():Promise.all(e.map(o=>{if(o=`${le}${o}`,o in q)return;q[o]=!0;const n=o.endsWith(".css"),c=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const i=document.createElement("link");if(i.rel=n?"stylesheet":ie,n||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),n)return new Promise((u,y)=>{i.addEventListener("load",u),i.addEventListener("error",y)})})).then(()=>t())};function de(a){switch(a){case"./pages/AboutPage.vue":return V(()=>import("./AboutPage.d66cf4cb.js"),["assets/AboutPage.d66cf4cb.js","assets/vendor.6aecaf39.js"]);case"./pages/AccountPage.vue":return V(()=>import("./AccountPage.99efc389.js"),["assets/AccountPage.99efc389.js","assets/AccountPage.8beb1b5c.css","assets/vendor.6aecaf39.js"]);case"./pages/HomePage.vue":return V(()=>import("./HomePage.08980df0.js"),["assets/HomePage.08980df0.js","assets/HomePage.d3082f77.css","assets/vendor.6aecaf39.js"]);case"./pages/ProfilePage.vue":return V(()=>import("./ProfilePage.9da64746.js"),["assets/ProfilePage.9da64746.js","assets/ProfilePage.066b1b1c.css","assets/vendor.6aecaf39.js"]);case"./pages/VaultPage.vue":return V(()=>import("./VaultPage.43da4ea3.js"),["assets/VaultPage.43da4ea3.js","assets/VaultPage.57f79762.css","assets/vendor.6aecaf39.js"]);default:return new Promise(function(t,e){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function x(a){return()=>de(`./pages/${a}.vue`)}const ue=[{path:"/",name:"Home",component:x("HomePage"),beforeEnter:D},{path:"/about",name:"About",component:x("AboutPage")},{path:"/account",name:"Account",component:x("AccountPage"),beforeEnter:J},{path:"/profile/:id",name:"Profile",component:x("ProfilePage")},{path:"/vault/:id",name:"Vault",component:x("VaultPage"),beforeEnter:D}],A=W({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:Y(),routes:ue});const _e={props:{creator:{type:Object,Required:!0}},setup(a){return{profileLink(){A.push({name:"Profile",params:{id:a.creator.id}})}}}},pe={class:"d-flex justify-content-apart"},ve={class:"d-flex flex-column justify-content-center"},me=["src"];function ge(a,t,e,o,n,c){var i,u;return _(),p("div",{title:"Open profile",onClick:t[0]||(t[0]=(...y)=>o.profileLink&&o.profileLink(...y)),class:"rounded selectable p-1 px-2"},[s("div",pe,[s("div",ve,f((i=e.creator)==null?void 0:i.name),1),s("img",{alt:"Profile Image",src:(u=e.creator)==null?void 0:u.picture,class:"profile-img"},null,8,me)])])}var fe=h(_e,[["render",ge],["__scopeId","data-v-20254329"]]),he=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fe});const R=window.location.origin.includes("localhost"),G=R?"https://localhost:5001":"",ye="dev-ir407zip.us.auth0.com",be="uXjiaF1TzMZojtAiclclDDpN668OHJmw",ke="https://camerondev.com";function K(a,t){if(R)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...t);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...t)}}const d={log(){K("log",arguments)},error(){K("error",arguments)},warn(){K("warn",arguments)},assert(){K("assert",arguments)},trace(){K("trace",arguments)}},l=Q.create({baseURL:G,timeout:8e3});class we{async GetKeeps(){const t=await l.get("api/keeps");d.log("[GetKeeps]",t.data),r.keeps=t.data}async GetKeepById(t){const e=await l.get(`api/keeps/${t}`);return d.log("[GetKeepsById]",e.data),r.ActiveKeep=e.data,e.data}async deleteKeep(t){const e=await l.delete(`api/keeps/${t}`);r.MyKeeps=r.MyKeeps.filter(o=>o.id!=t),d.log("[DeleteKeep]",e.data)}async GetActiveUserKeeps(t){const e=await l.get(`api/profiles/${t}/keeps`);if(d.log("[GetActiveUserKeeps]",e.data),r.account.id==t){r.MyKeeps=e.data;return}r.ActiveUserKeeps=e.data}async createKeep(t){const e=await l.post("api/keeps",t);console.log("[CreateKeep]",e.data),r.MyKeeps=[e.data,...r.MyKeeps]}}const $=new we;class g{static async confirm(t="Are you sure?",e="You won't be able to revert this!",o="warning",n="Yes, delete it!"){try{return!!(await L.fire({title:t,text:e,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n})).isConfirmed}catch{return!1}}static toast(t="Warning!",e="warning",o="top-end",n=3e3,c=!0){L.fire({title:t,icon:e,position:o,timer:n,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(t){var e;if(t.isAxiosError){const{response:o}=t;this.toast(((e=o.data.error)==null?void 0:e.message)||o.data.message,"error")}else this.toast(t.message||t,"error")}static success(t="Success!"){this.toast(t,"success")}}class Ve{async GetMyVaultKeeps(){const t=await l.get("account/vaultkeeps");r.MyVaultKeeps=t.data}async AddToVault(t){const e=await l.post("api/vaultkeeps",t);console.log("[AddToVault]",e.data),r.MyVaultKeeps=[e.data,...r.MyVaultKeeps]}async deleteVKeep(t,e){const o=await l.delete(`api/vaultkeeps/${t}`);console.log("[deleteVKeep",o.data),r.CurrentVaultKeeps=r.CurrentVaultKeeps.filter(n=>n.id!=e)}}const E=new Ve;const xe={props:{keep:{type:Object,required:!0},vaults:{type:Array,required:!1},activeVault:{type:Object,required:!1}},setup(a){return{route:X(),account:b(()=>r.account),activeKeep:b(()=>r.activeKeep),filteredVaults:b(()=>r.MyVaults),async viewDetails(){a.keep.views+=1;try{await $.GetKeepById(a.keep.id),console.log(r.ActiveKeep);const e=r.ActiveKeep;a.keep.views=e.views,a.keep.keeps=e.views}catch(e){d.error(e),g.toast(e,"error")}},async deleteKeep(){if(await g.confirm("Are you sure you'd like to delete this keep?"))try{await $.deleteKeep(a.keep.id),g.toast("Deleted Keep")}catch(e){g.toast(e,"error"),d.error(e)}},async selectVault(e){console.log("adding to vault",e.id);try{const o={vaultId:e.id,keepId:a.keep.id};E.AddToVault(o),g.toast(`Added To ${e.name}`),a.keep.kept+=1}catch(o){g.toast(o,"error"),d.error(o)}},async removeFromVault(){if(console.log("[RemoveFromVault]",a.keep),await g.confirm("Are you sure you'd like to remove this keep from this vault?"))try{await E.deleteVKeep(a.keep.vaultKeepId,a.keep.id),g.toast("Removed From Vault")}catch(e){g.toast(e,"error"),d.error(e)}}}}},U=a=>(S("data-v-157fcab8"),a=a(),T(),a),Ae={class:"rounded elevation-2 my-2"},Ke=["data-bs-target"],Ce={class:"ex-text-container"},Se=["src"],Te={class:"ex-text"},$e={class:""},Ee={class:"d-flex justify-content-apart"},Pe={class:"d-flex flex-column justify-content-center"},Ie={class:"pe-4"},je=["src"],Me=["id"],Oe={class:"modal-dialog modal-xl",role:"document"},De={class:"modal-content"},Le={class:"modal-body"},Ne={class:"move-it-container"},qe=U(()=>s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Re={class:"container"},Ge={class:"row"},Ue={class:"col-6"},Be=["src"],He={class:"col-6 d-flex flex-column justify-content-between"},ze={class:"row"},Fe={class:"col-12"},We={class:"d-flex justify-content-around my-3"},Ye={class:"display-6 my-2"},Je={class:"my-2"},Qe={class:"row"},Xe={class:"col-12"},Ze={class:"d-flex justify-content-between"},et={class:"d-flex flex-column justify-content-center"},tt={class:"input-group"},at=U(()=>s("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},"Add To Vault",-1)),ot={class:"dropdown-menu"},st=["onClick"],nt={class:"dropdown-item"},rt={class:"d-flex flex-column justify-content-center"},ct={key:0,class:"d-flex flex-column justify-content-center"},it=["data-bs-target"],lt={class:"col-12 d-flex justify-content-between my-2"},dt={class:"d-flex justify-content-center"},ut={class:"d-flex flex-column justify-content-center"},_t=["data-bs-target"];function pt(a,t,e,o,n,c){var u,y,I,j,M;const i=k("Creator");return _(),p("div",null,[s("div",Ae,[s("div",{title:"open keep",onClick:t[1]||(t[1]=(...m)=>o.viewDetails&&o.viewDetails(...m)),"data-bs-toggle":"modal","data-bs-target":`#keep${e.keep.id}`},[s("div",Ce,[s("img",{alt:"Keep Image",src:e.keep.img,class:"img-fluid selectable rounded"},null,8,Se),s("div",Te,[s("div",$e,[s("div",Ee,[s("div",Pe,[s("div",Ie,f(e.keep.name),1)]),s("div",{title:"open profile",onClick:t[0]||(t[0]=(...m)=>a.profileLink&&a.profileLink(...m)),class:"selectable"},[s("img",{alt:"Profile Image",src:(u=e.keep.creator)==null?void 0:u.picture,class:"profile-img"},null,8,je)])])])])])],8,Ke),s("div",{class:"modal fade",id:`keep${e.keep.id}`,"aria-labelledby":"modelTitleId","aria-hidden":"true"},[s("div",Oe,[s("div",De,[s("div",Le,[s("div",Ne,[qe,s("div",null,[s("div",Re,[s("div",Ge,[s("div",Ue,[s("img",{alt:"Keep Image",src:e.keep.img,class:"img-fluid rounded elevation-1 my-2"},null,8,Be)]),s("div",He,[s("div",ze,[s("div",Fe,[s("div",We,[s("div",null," Views: "+f(e.keep.views),1),s("div",null," Kept: "+f(e.keep.kept),1)]),s("div",Ye,f(e.keep.name),1),s("div",Je,f(e.keep.description),1)])]),s("div",Qe,[s("div",Xe,[s("div",Ze,[s("div",et,[s("div",tt,[at,s("ul",ot,[(_(!0),p(O,null,Z(o.filteredVaults,m=>(_(),p("li",{title:"Select Vault",onClick:ra=>o.selectVault(m)},[s("a",nt,f(m.name),1)],8,st))),256))])])]),s("div",rt,[((y=o.account)==null?void 0:y.id)==e.keep.creatorId?(_(),p("div",ct,[s("button",{title:"Delete Keep",onClick:t[2]||(t[2]=(...m)=>o.deleteKeep&&o.deleteKeep(...m)),class:"btn btn-danger","data-bs-toggle":"modal","data-bs-target":`#modal${e.keep.id}`}," Delete ",8,it)])):C("",!0)])]),s("div",lt,[s("div",dt,[s("div",ut,[((I=o.account)==null?void 0:I.id)==((j=e.activeVault)==null?void 0:j.creatorId)&&((M=e.activeVault)==null?void 0:M.id)!=null?(_(),p("div",{key:0,title:"Remove from vault",onClick:t[3]||(t[3]=(...m)=>o.removeFromVault&&o.removeFromVault(...m)),class:"d-flex flex-column justify-content-center"},[s("button",{class:"btn btn-outline-danger","data-bs-toggle":"modal","data-bs-target":`#modal${e.keep.id}`}," Remove From Vault ",8,_t)])):C("",!0)])]),w(i,{creator:e.keep.creator,"data-bs-toggle":"modal","data-bs-target":`#modal${e.keep.id}`},null,8,["creator","data-bs-target"])])])])])])])])])])])])],8,Me)])])}var vt=h(xe,[["render",pt],["__scopeId","data-v-157fcab8"]]),mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vt});class gt{async getMyVaults(){const t=await l.get("account/vaults");d.log("[GetMyVaults]",t.data),r.MyVaults=t.data}async GetActiveUserVaults(t){const e=await l.get(`api/profiles/${t}/vaults`);d.log("[GetActiveUserVaults]",e.data),r.ActiveVaults=e.data}async GetActiveVault(t){const e=await l.get(`api/vaults/${t}`);console.log("[GetActiveVault]",e.data),r.ActiveVault=e.data}async GetCurrentVaultKeeps(t){const e=await l.get(`api/vaults/${t}/keeps`);console.log("[GetCurrentVaultKeeps]",e.data),r.CurrentVaultKeeps=e.data}async DeleteVault(t){const e=await l.delete(`api/vaults/${t}`);console.log("[DeleteVault]",e.data),r.MyVaults=r.MyVaults.filter(o=>o.id!=t)}async createNewVault(t){const e=await l.post("api/vaults",t);console.log("[CreateNewVault]",e.data),r.MyVaults=[e.data,...r.MyVaults]}}const ft=new gt;class ht{async getAccount(){try{const t=await l.get("/account");r.account=t.data}catch(t){d.error("Something went Wrong",t)}try{await ft.getMyVaults(),await E.GetMyVaultKeeps(),await $.GetActiveUserKeeps(r.account.id)}catch(t){d.error("Account Requests Failed",t)}}}const yt=new ht,bt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class kt{constructor(t=!1,e=G){}on(t,e){var o;return(o=this.socket)==null||o.on(t,e.bind(this)),this}onConnected(t){d.log("[SOCKET_CONNECTION]",t),this.connected=!0,this.playback()}onAuthenticated(t){d.log("[SOCKET_AUTHENTICATED]",t),this.authenticated=!0,this.playback()}authenticate(t){var e;(e=this.socket)==null||e.emit(bt.authenticate,t)}onError(t){d.error("[SOCKET_ERROR]",t)}enqueue(t,e){d.log("[ENQUEING_ACTION]",{action:t,payload:e}),this.queue.push({action:t,payload:e})}playback(){d.log("[SOCKET_PLAYBACK]");const t=[...this.queue];this.queue=[],t.forEach(e=>{this.emit(e.action,e.payload)})}emit(t,e=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(t,e);if(!this.connected)return this.enqueue(t,e);this.socket.emit(t,e)}}class wt extends kt{constructor(){super();this.on("error",this.onError)}onError(t){g.toast(t.message,"error")}}const B=new wt,v=ee({domain:ye,clientId:be,audience:ke,useRefreshTokens:!0,onRedirectCallback:a=>{A.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});v.on(v.AUTH_EVENTS.AUTHENTICATED,async function(){l.defaults.headers.authorization=v.bearer,l.interceptors.request.use(Vt),r.user=v.user,await yt.getAccount(),B.authenticate(v.bearer)});async function Vt(a){if(!v.isAuthenticated)return a;const t=v.identity.exp*1e3,e=t<Date.now(),o=t<Date.now()+1e3*60*60*12;return e?await v.loginWithPopup():o&&(await v.getTokenSilently(),l.defaults.headers.authorization=v.bearer,B.authenticate(v.bearer)),a}const xt={setup(){return{user:b(()=>r.user),account:b(()=>r.account),async login(){v.loginWithPopup()},async logout(){v.logout({returnTo:window.location.origin})}}}},H=a=>(S("data-v-4847271e"),a=a(),T(),a),At={class:"navbar-text"},Kt={key:1,class:"dropdown my-2 my-lg-0"},Ct={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown",id:"authDropdown"},St={key:0},Tt=["src"],$t={class:"mx-3 text-dark fw-bold"},Et={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},Pt=H(()=>s("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),It=H(()=>s("i",{class:"mdi mdi-logout"},null,-1)),jt=te(" logout "),Mt=[It,jt];function Ot(a,t,e,o,n,c){const i=k("router-link");return _(),p("span",At,[o.user.isAuthenticated?(_(),p("div",Kt,[s("div",Ct,[o.account.picture?(_(),p("div",St,[s("img",{src:o.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,Tt),s("span",$t,f(o.account.name),1)])):C("",!0)]),s("div",Et,[w(i,{to:{name:"Account"}},{default:N(()=>[Pt]),_:1}),s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:t[1]||(t[1]=(...u)=>o.logout&&o.logout(...u))},Mt)])])):(_(),p("button",{key:0,class:"btn selectable text-dark text-uppercase my-2 my-lg-0",onClick:t[0]||(t[0]=(...u)=>o.login&&o.login(...u))}," Login "))])}var Dt=h(xt,[["render",Ot],["__scopeId","data-v-4847271e"]]),Lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Dt});const Nt={props:{modalTarget:{type:String,required:!1},formId:{type:String,required:!1}}};function qt(a,t,e,o,n,c){return null}var Rt=h(Nt,[["render",qt]]),Gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Rt});const Ut={setup(){return{}}},P=a=>(S("data-v-073ca709"),a=a(),T(),a),Bt={class:"navbar navbar-expand-lg navbar-dark bg-primary px-3"},Ht=P(()=>s("div",{class:"d-flex flex-column align-items-center display-3 custom-treat fw-bold"}," Keepr ",-1)),zt=P(()=>s("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1)),Ft={class:"collapse navbar-collapse justify-content-end",id:"navbarText"},Wt=P(()=>s("div",null,null,-1));function Yt(a,t,e,o,n,c){const i=k("router-link"),u=k("Login");return _(),p("nav",Bt,[w(i,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:N(()=>[Ht]),_:1}),zt,s("div",Ft,[Wt,w(u)])])}var Jt=h(Ut,[["render",Yt],["__scopeId","data-v-073ca709"]]),Qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jt});const Xt={props:{vault:{type:Object,required:!0}},setup(a){return{navToVault(){a.vault.isPrivate==!0&&r.account.id!=a.vault.creatorId&&A.push({name:"Home"}),A.push({name:"Vault",params:{id:a.vault.id}})}}}},Zt={class:"col-md-3 col-6"},ea=["src"],ta={class:"vault-text"};function aa(a,t,e,o,n,c){return _(),p("div",Zt,[s("div",{onClick:t[0]||(t[0]=(...i)=>o.navToVault&&o.navToVault(...i)),class:"vault-card selectable"},[s("img",{alt:"Vault Image",src:e.vault.img,class:"rounded elevation-2 fit-this"},null,8,ea),s("div",ta,[s("div",null,f(e.vault.name),1)])])])}var oa=h(Xt,[["render",aa],["__scopeId","data-v-997e67d0"]]),sa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oa});function na(a){Object.entries({"./components/Creator.vue":he,"./components/Keep.vue":mt,"./components/Login.vue":Lt,"./components/Modal.vue":Gt,"./components/Navbar.vue":Qt,"./components/Vault.vue":sa}).forEach(([e,o])=>{const n=o.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(n,o.default)})}const z=ae(ce);na(z);z.use(A).mount("#app");export{r as A,g as P,h as _,l as a,$ as k,d as l,ft as v};
